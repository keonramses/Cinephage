# Cinephage Environment Variables
# When using manual install or Docker Compose with env_file, copy this file to .env and configure your settings as needed.

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Host address to bind to (default: 0.0.0.0 = all interfaces)
# Use 127.0.0.1 if running behind a reverse proxy on the same machine
# HOST=0.0.0.0

# User/Group IDs for Docker entrypoint (find yours: id -u && id -g)
# Docker only: Used by entrypoint to drop privileges and fix ownership
# PUID=1000
# PGID=1000

# Port to expose/listen on (default: 3000)
# PORT=3000

# Trusted origin for CSRF protection (required if accessing via IP/FQDN)
# Set this to your access URL, e.g., http://192.168.1.100:3000
# ORIGIN=http://localhost:3000

# Optional public base URL used when generating external-facing links/paths.
# If unset, ORIGIN is used where applicable.
# PUBLIC_BASE_URL=http://localhost:3000

# Timezone for scheduled tasks and logs (default: UTC)
# Use TZ database names, e.g., America/New_York, Europe/London
# TZ=UTC

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log directory (default: ./logs for manual install, /config/logs for Docker)
# LOG_DIR=./logs

# Maximum log file size in MB before rotation (default: 10)
# LOG_MAX_SIZE_MB=10

# Maximum number of rotated log files to keep (default: 5)
# LOG_MAX_FILES=5

# Enable/disable file logging (default: true)
# LOG_TO_FILE=true

# Include error stack traces in logs.
# Default: enabled in development, disabled in production.
# Set true to always include, false to always suppress.
# LOG_INCLUDE_STACK=false

# Disable sensitive value redaction in logs (debug only, NOT recommended in production).
# Default: false (redaction enabled).
# LOG_SENSITIVE=false

# =============================================================================
# DATA DIRECTORIES (Advanced)
# =============================================================================
# These are auto-configured for Docker and manual installs.
# Only override if you need custom paths.

# Data directory - stores database, indexer definitions, caches, etc.
# Docker default: /config/data (persisted via ./config:/config volume mount)
# Manual install default: ./data
# DATA_DIR=./data

# Log directory - stores application logs
# Docker default: /config/logs (persisted via ./config:/config volume mount)
# Manual install default: ./logs
# LOG_DIR=./logs

# Indexer definitions directory - YAML indexer configurations
# Docker default: /config/data/indexers/definitions
# Manual install default: ./data/indexers/definitions
# INDEXER_DEFINITIONS_PATH=./data/indexers/definitions
# INDEXER_CUSTOM_DEFINITIONS_PATH=./data/indexers/definitions/custom

# External lists preset directory - YAML list configurations
# Docker default: /config/data/external-lists/presets
# Manual install default: ./data/external-lists/presets
# EXTERNAL_LISTS_PRESETS_PATH=./data/external-lists/presets
# EXTERNAL_LISTS_CUSTOM_PRESETS_PATH=./data/external-lists/presets/custom

# IMPORTANT: For Docker, avoid mounting /app as it contains application code.
# Use the single ./config:/config mount which includes data, logs, and indexers.

# =============================================================================
# MEDIA INFO (OPTIONAL)
# =============================================================================

# Path to ffprobe binary (default: searches PATH)
# Used for extracting media info from video files (codecs, resolution, etc.)
# Note: ffprobe is NOT included in Synology DSM 7 by default
# Install ffmpeg/ffprobe:
#   Ubuntu/Debian: sudo apt install ffmpeg
#   macOS: brew install ffmpeg
#   Windows: Download from https://ffmpeg.org/download.html
# FFPROBE_PATH=/usr/bin/ffprobe

# =============================================================================
# WORKER CONFIGURATION
# =============================================================================
# Maximum concurrent workers by type
# Adjust based on your system resources

# Stream workers - for proxying HLS streams (default: 10)
# WORKER_MAX_STREAMS=10

# Import workers - for moving/copying downloaded files (default: 5)
# WORKER_MAX_IMPORTS=5

# Scan workers - for library folder scanning (default: 2)
# WORKER_MAX_SCANS=2

# Monitoring workers - for automated search tasks (default: 5)
# WORKER_MAX_MONITORING=5

# Search workers - for indexer searches (default: 3)
# WORKER_MAX_SEARCH=3

# Subtitle search workers - for subtitle provider searches (default: 3)
# WORKER_MAX_SUBTITLE_SEARCH=3

# Portal scan workers - for Stalker portal scanning (default: 2)
# WORKER_MAX_PORTAL_SCANS=2

# Channel sync workers - for Live TV channel sync tasks (default: 3)
# WORKER_MAX_CHANNEL_SYNCS=3

# Worker cleanup interval in milliseconds (default: 1800000 = 30 minutes)
# WORKER_CLEANUP_MS=1800000

# Maximum log entries per worker in memory (default: 1000)
# WORKER_MAX_LOGS=1000

# =============================================================================
# STREAMING CONFIGURATION (Advanced)
# =============================================================================
# Settings for the HLS proxy and stream handling

# Proxy fetch timeout in milliseconds (default: 30000 = 30 seconds)
# PROXY_FETCH_TIMEOUT_MS=30000

# Maximum segment size in bytes (default: 52428800 = 50MB)
# PROXY_SEGMENT_MAX_SIZE=52428800

# Maximum retry attempts for proxy fetches on 5xx errors (default: 2)
# PROXY_MAX_RETRIES=2

# Default referer header for proxy requests (default: https://videasy.net)
# DEFAULT_PROXY_REFERER=https://videasy.net

# =============================================================================
# PROVIDER CONFIGURATION (Advanced)
# =============================================================================
# Circuit breaker and caching settings for streaming providers

# Maximum consecutive failures before circuit opens (default: 3)
# PROVIDER_MAX_FAILURES=3

# Time in ms before circuit breaker enters half-open state (default: 30000)
# PROVIDER_CIRCUIT_HALF_OPEN_MS=30000

# Time in ms before circuit breaker fully resets (default: 60000)
# PROVIDER_CIRCUIT_RESET_MS=60000

# TTL for provider result cache entries in ms (default: 30000)
# PROVIDER_CACHE_TTL_MS=30000

# Number of providers to try in parallel mode (default: 3)
# PROVIDER_PARALLEL_COUNT=3

# =============================================================================
# LIVE TV (Advanced)
# =============================================================================
# EPG and Live TV scheduling settings

# Startup grace period before EPG tasks run in ms (default: 30000 = 30 seconds)
# EPG_STARTUP_GRACE_MS=30000

# =============================================================================
# GRACEFUL SHUTDOWN
# =============================================================================

# Seconds to wait for connections to close during shutdown (default: 30)
# SHUTDOWN_TIMEOUT=30

# =============================================================================
# DATABASE (Auto-configured)
# =============================================================================

# Database is SQLite stored at data/cinephage.db
# This is created automatically on first run

# =============================================================================
# APPLICATION MODE (Usually auto-detected)
# =============================================================================

# Node environment - set automatically by npm scripts
# NODE_ENV=production
