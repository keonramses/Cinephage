# =============================================================================
# Cinephage Docker Compose
# =============================================================================
# Official image: ghcr.io/moldytaint/cinephage:latest
# To build from source instead of pulling the image:
#   Uncomment "build: ." and comment out "image:" below
# =============================================================================

services:
  cinephage:
    image: ghcr.io/moldytaint/cinephage:latest
    # build: .  # Uncomment to build locally (requires cloning the repo)
    container_name: cinephage
    restart: unless-stopped
    init: true # Use tini to prevent zombie browser processes
    security_opt:
      - no-new-privileges:true
    ports:
      - '3000:3000'
    environment:
      - PUID=1000 # Your user ID (run: id -u)
      - PGID=1000 # Your group ID (run: id -g)
      - TZ=UTC # Your timezone
      - ORIGIN=http://localhost:3000 # Trusted app origin / CSRF origin
      - BETTER_AUTH_URL=http://localhost:3000 # Auth callback/redirect base URL
    volumes:
      - ./config:/config
      - /path/to/media:/media # REQUIRED: Your media library
      - /path/to/downloads:/downloads # REQUIRED: Download client output folder
